<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.canvas.Canvas?>

<?import javafx.scene.control.Button?>
<BorderPane prefHeight="620" prefWidth="1024" style="-fx-background-color: #f3f4f6;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.dacs4_v2.viewModels.GameController">

    <!-- Top bar: game info, komi, color -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="16" style="-fx-padding: 12 24;">
            <children>
                <Label fx:id="lblGameInfo" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #111827;" />
                <Label fx:id="lblKomi" style="-fx-text-fill: #6b7280;" />
                <Label fx:id="lblPlayerColor" style="-fx-text-fill: #111827; -fx-font-weight: bold;" />
            </children>
        </HBox>
    </top>

    <!-- Main content: board on the left, players panel on the right -->
    <center>
        <HBox alignment="CENTER" spacing="24" style="-fx-padding: 8 24 24 24;">
            <children>

                <!-- Left: board + status -->
                <VBox spacing="12">
                    <children>

                        <!-- Status chips row -->
                        <HBox spacing="12" />

                        <!-- Board with wooden background + Canvas grid + clickable overlay -->
                        <StackPane style="-fx-padding: 12;">
                            <StackPane maxHeight="640" maxWidth="640"
                                       style="-fx-background-color: linear-gradient(to bottom, #c58a4b, #b07a3b); -fx-background-radius: 24; -fx-padding: 18;">
                                <StackPane style="-fx-background-color: #d7a86e; -fx-padding: 12; -fx-background-radius: 16;">
                                    <!-- Canvas vẽ lưới + hoshi -->
                                    <Canvas fx:id="boardCanvas" width="580" height="580" />
                                    <!-- GridPane trong suốt để chứa các Button ô cờ -->
                                    <GridPane fx:id="boardGrid" hgap="0" vgap="0" />
                                </StackPane>
                            </StackPane>
                        </StackPane>

                    </children>
                </VBox>

                <!-- Right: players panel -->
                <VBox prefWidth="260" spacing="16" style="-fx-background-color: white; -fx-background-radius: 16;                              -fx-padding: 16;                              -fx-effect: dropshadow(gaussian, rgba(15,23,42,0.12),                                                     12, 0.25, 0, 4);">
                    <children>

                        <!-- Player One card -->
                        <HBox spacing="12">
                            <children>
                                <StackPane prefHeight="40" prefWidth="40" style="-fx-background-radius: 999;                                                   -fx-background-color: linear-gradient(to bottom,                                                                                          #111827, #111827);">
                                    <Label style="-fx-text-fill: white; -fx-font-size: 14;                                                   -fx-font-weight: bold;" text="P1" />
                                </StackPane>

                                <VBox spacing="4">
                                    <children>
                                        <Label fx:id="lblPlayerOneName" style="-fx-font-weight: bold; -fx-text-fill: #111827;" text="Player One" />
                                        <Label fx:id="lblPlayerOneRank" style="-fx-text-fill: #6b7280;" text="5 Dan" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <children>
                                <Label style="-fx-text-fill: #6b7280;" text="⏱" />
                                <Label fx:id="lblPlayerOneTime" style="-fx-text-fill: #111827;" text="10:30" />
                            </children>
                        </HBox>

                        <Separator />

                        <!-- Player Two card -->
                        <HBox spacing="12">
                            <children>
                                <StackPane prefHeight="40" prefWidth="40" style="-fx-background-radius: 999;                                                   -fx-background-color: linear-gradient(to bottom,                                                                                          #111827, #111827);">
                                    <Label style="-fx-text-fill: white; -fx-font-size: 14;                                                   -fx-font-weight: bold;" text="P2" />
                                </StackPane>

                                <VBox spacing="4">
                                    <children>
                                        <Label fx:id="lblPlayerTwoName" style="-fx-font-weight: bold; -fx-text-fill: #111827;" text="Player Two" />
                                        <Label fx:id="lblPlayerTwoRank" style="-fx-text-fill: #6b7280;" text="4 Dan" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <children>
                                <Label style="-fx-text-fill: #6b7280;" text="⏱" />
                                <Label fx:id="lblPlayerTwoTime" style="-fx-text-fill: #111827;" text="09:45" />
                            </children>
                        </HBox>

                        <!-- Pass / scoring controls -->
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <children>
                                <Button text="Pass" onAction="#onPassClicked"
                                        style="-fx-background-color: #111827; -fx-text-fill: white; -fx-background-radius: 999; -fx-padding: 6 16;" />
                            </children>
                        </HBox>

                  <HBox prefHeight="38.0" prefWidth="188.0">
                     <children>
                        <HBox alignment="CENTER_LEFT" prefHeight="38.0" prefWidth="233.0" spacing="8" style="-fx-background-color: white; -fx-background-radius: 999;                                              -fx-padding: 8 16;                                              -fx-effect: dropshadow(gaussian, rgba(15,23,42,0.08),                                                                     8, 0.2, 0, 2);">
                           <children>
                              <Label style="-fx-font-weight: bold;" text="Black captured:" textAlignment="CENTER" />
                              <Label fx:id="lblBlackCaptured1" text="0" />
                           </children>
                        </HBox>
                     </children>
                  </HBox>
                  <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: white; -fx-background-radius: 999;                                              -fx-padding: 8 16;                                              -fx-effect: dropshadow(gaussian, rgba(15,23,42,0.08),                                                                     8, 0.2, 0, 2);">
                     <children>
                        <Label style="-fx-font-weight: bold;" text="white captured:" textAlignment="CENTER" />
                        <Label fx:id="lblBlackCaptured11" text="0" />
                     </children>
                  </HBox>

                          <HBox alignment="CENTER_LEFT" spacing="8" style="-fx-background-color: white; -fx-background-radius: 999;                                              -fx-padding: 8 16;                                              -fx-effect: dropshadow(gaussian, rgba(15,23,42,0.08),                                                                     8, 0.2, 0, 2);">
                              <children>
                                  <Label style="-fx-font-weight: bold;" text="Current:" />
                                  <Label fx:id="lblCurrentTurn" text="● black" />
                              </children>
                          </HBox>

                    </children>
                </VBox>

            </children>
        </HBox>
    </center>

</BorderPane>
