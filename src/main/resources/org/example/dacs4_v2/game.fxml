<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.dacs4_v2.viewModels.GameController"
            prefWidth="1024" prefHeight="700" style="-fx-background-color: #f0f4f8;">
    
    <!-- HEADER -->
    <top>
        <VBox style="-fx-background-color: #ffffff; -fx-padding: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
            <HBox alignment="CENTER" spacing="20">
                <Label fx:id="lblGameName" text="Game - Room Name" 
                       style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                <Label fx:id="lblKomi" text="Komi: 6.5" 
                       style="-fx-font-size: 14; -fx-text-fill: #64748b;"/>
                <Label fx:id="lblTurnIndicator" text="LÆ°á»£t: ÄEN" 
                       style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: white; -fx-background-color: #1e293b; -fx-padding: 6 12; -fx-background-radius: 999;"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- MAIN CONTENT -->
    <center>
        <HBox spacing="0" alignment="CENTER">
            <!-- LEFT PLAYER PANEL (BLACK) -->
            <VBox fx:id="panelBlack" prefWidth="200" spacing="12" alignment="TOP_CENTER"
                  style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 2, 0);">
                
                <!-- Avatar -->
                <StackPane prefWidth="80" prefHeight="80">
                    <Label fx:id="lblBlackAvatar" text="â—" 
                           style="-fx-font-size: 48; -fx-text-fill: white; -fx-background-color: linear-gradient(to bottom, #1e293b, #334155); -fx-background-radius: 999; -fx-padding: 10 18;"/>
                </StackPane>
                
                <!-- Player Name -->
                <Label fx:id="lblBlackName" text="Player 1" 
                       style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                
                <!-- Rank -->
                <Label fx:id="lblBlackRank" text="Rank: -" 
                       style="-fx-font-size: 12; -fx-text-fill: #64748b;"/>
                
                <!-- Stone Color Indicator -->
                <HBox alignment="CENTER" spacing="6" style="-fx-background-color: #f1f5f9; -fx-padding: 8; -fx-background-radius: 8;">
                    <Label text="â—" style="-fx-font-size: 24; -fx-text-fill: #1e293b;"/>
                    <Label text="QuÃ¢n Äen" style="-fx-font-size: 12; -fx-text-fill: #475569;"/>
                </HBox>
                
                <Separator style="-fx-background-color: #e2e8f0;"/>
                
                <!-- Timer -->
                <VBox alignment="CENTER" spacing="4" style="-fx-background-color: #f8fafc; -fx-padding: 12; -fx-background-radius: 8;">
                    <Label text="â± Thá»i gian" style="-fx-font-size: 11; -fx-text-fill: #64748b;"/>
                    <Label fx:id="lblBlackTime" text="10:00" 
                           style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                </VBox>
                
                <Separator style="-fx-background-color: #e2e8f0;"/>
                
                <!-- Captured Stones -->
                <VBox alignment="CENTER" spacing="4">
                    <Label text="QuÃ¢n bá»‹ báº¯t" style="-fx-font-size: 11; -fx-text-fill: #64748b;"/>
                    <HBox alignment="CENTER" spacing="6">
                        <Label text="â—‹" style="-fx-font-size: 20; -fx-text-fill: #94a3b8;"/>
                        <Label fx:id="lblBlackCaptured" text="0" 
                               style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                    </HBox>
                </VBox>
                
                <!-- Turn Indicator -->
                <Label fx:id="lblBlackTurn" text="â–¶ ÄANG ÄI" 
                       style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: white; -fx-background-color: #22c55e; -fx-padding: 8 16; -fx-background-radius: 8;"
                       visible="true"/>
                
                <Pane VBox.vgrow="ALWAYS"/>
            </VBox>
            
            <!-- CENTER - GO BOARD -->
            <VBox alignment="CENTER" HBox.hgrow="ALWAYS" style="-fx-background-color: #f0f4f8; -fx-padding: 20;">
                <StackPane fx:id="boardContainer" style="-fx-background-color: #dcb35c; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 20, 0.3, 0, 5);">
                    <Canvas fx:id="boardCanvas" width="500" height="500"/>
                </StackPane>
            </VBox>
            
            <!-- RIGHT PLAYER PANEL (WHITE) -->
            <VBox fx:id="panelWhite" prefWidth="200" spacing="12" alignment="TOP_CENTER"
                  style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, -2, 0);">
                
                <!-- Avatar -->
                <StackPane prefWidth="80" prefHeight="80">
                    <Label fx:id="lblWhiteAvatar" text="â—‹" 
                           style="-fx-font-size: 48; -fx-text-fill: #475569; -fx-background-color: linear-gradient(to bottom, #f1f5f9, #e2e8f0); -fx-background-radius: 999; -fx-padding: 10 18; -fx-border-color: #cbd5e1; -fx-border-width: 2; -fx-border-radius: 999;"/>
                </StackPane>
                
                <!-- Player Name -->
                <Label fx:id="lblWhiteName" text="Player 2" 
                       style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                
                <!-- Rank -->
                <Label fx:id="lblWhiteRank" text="Rank: -" 
                       style="-fx-font-size: 12; -fx-text-fill: #64748b;"/>
                
                <!-- Stone Color Indicator -->
                <HBox alignment="CENTER" spacing="6" style="-fx-background-color: #f1f5f9; -fx-padding: 8; -fx-background-radius: 8;">
                    <Label text="â—‹" style="-fx-font-size: 24; -fx-text-fill: #94a3b8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 2, 0, 0, 0);"/>
                    <Label text="QuÃ¢n Tráº¯ng" style="-fx-font-size: 12; -fx-text-fill: #475569;"/>
                </HBox>
                
                <Separator style="-fx-background-color: #e2e8f0;"/>
                
                <!-- Timer -->
                <VBox alignment="CENTER" spacing="4" style="-fx-background-color: #f8fafc; -fx-padding: 12; -fx-background-radius: 8;">
                    <Label text="â± Thá»i gian" style="-fx-font-size: 11; -fx-text-fill: #64748b;"/>
                    <Label fx:id="lblWhiteTime" text="10:00" 
                           style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                </VBox>
                
                <Separator style="-fx-background-color: #e2e8f0;"/>
                
                <!-- Captured Stones -->
                <VBox alignment="CENTER" spacing="4">
                    <Label text="QuÃ¢n bá»‹ báº¯t" style="-fx-font-size: 11; -fx-text-fill: #64748b;"/>
                    <HBox alignment="CENTER" spacing="6">
                        <Label text="â—" style="-fx-font-size: 20; -fx-text-fill: #1e293b;"/>
                        <Label fx:id="lblWhiteCaptured" text="0" 
                               style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                    </HBox>
                </VBox>
                
                <!-- Turn Indicator -->
                <Label fx:id="lblWhiteTurn" text="â–¶ ÄANG ÄI" 
                       style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: white; -fx-background-color: #22c55e; -fx-padding: 8 16; -fx-background-radius: 8;"
                       visible="false"/>
                
                <Pane VBox.vgrow="ALWAYS"/>
            </VBox>
        </HBox>
    </center>
    
    <!-- BOTTOM - CONTROL BUTTONS -->
    <bottom>
        <HBox alignment="CENTER" spacing="20" style="-fx-background-color: #ffffff; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, -2);">
            <Button fx:id="btnPass" text="â­ Pass" onAction="#onPass"
                    style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
            <Button fx:id="btnSurrender" text="ðŸ³ Äáº§u hÃ ng" onAction="#onSurrender"
                    style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
            <Button fx:id="btnExit" text="ðŸšª ThoÃ¡t game" onAction="#onExit"
                    style="-fx-background-color: #64748b; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
        </HBox>
    </bottom>
</BorderPane>
